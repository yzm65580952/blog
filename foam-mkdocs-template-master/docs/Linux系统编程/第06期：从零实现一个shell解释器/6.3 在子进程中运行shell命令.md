# 6.3 在子进程中运行shell命令
```c

/************************************************
* Copyright(C) zhaixue.cc All rights reserved
*
*      Filename: shell.c
*        Author: litao.wang
*        E-mail: 3284757626@qq.com
*   Description: 
*        Create: 2019-08-20 14:03:55
* Last Modified: 2019-08-20 14:42:37
************************************************/
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/wait.h>

int main (void)
{
    char *arglist[5] = {
        "ls",
        "-l",
        "-a"
    };
    int ret_from_fork;
    int child_ret_status;
    ret_from_fork = fork ();
    if (ret_from_fork == 0)		//在子进程中执行
    {
        execvp (arglist[0], arglist);
        perror ("execvp");
        exit (EXIT_FAILURE);
    }
    else if (ret_from_fork > 0)
    {
        if(wait (&child_ret_status) == -1)//等待子进程执行完成
            perror ("wait");
    }
    else
    {
        perror ("fork");
        exit (EXIT_FAILURE);
    }
    printf ("main shell exit\n");
    return 0;
}

```