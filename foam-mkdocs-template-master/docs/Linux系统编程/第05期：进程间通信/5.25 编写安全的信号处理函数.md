# 5.25 编写安全的信号处理函数
##  信号的本质
是一种软中断，中断有优先级，信号也有优先级
信号处理函数类似于中断处理函数
信号也可以随时打断当前正在运行的进程，去运行信号处理函数

## 编程要点
 1. 重入：可能在任何时刻、任意地点打断当前进程的执行
 2. 尽量不要在处理函数中修改全局数据
 3. 尽量使用可重入函数，被打断的进程可能正在调用不可重入函数
 难点：很难写出一个安全地、可重入的信号处理程序
 ```c
int sum ;
int add (int count)
{
	static int sum = 0;
	For （i from 0 to count）
	sum = sum + i;
}
 ```
 
 ## 可重入与线程安全
1. 可重入函数一定是线程安全的
2. 不可重入函数通过加锁访问全局变量，也是线程安全的，但仍是不可
重入的
3. 如果一个函数对于信号处理来说是可重入的，则称其为异步信号安全
函数，可重入函数跟信号安全函数可以看做等价的
4. 线程安全的函数，不一定是异步信号安全的

## 可重入安全函数列表
![[Pasted image 20201006202136.png]]
![[Pasted image 20201006202150.png]]

## 是不是一定不能调用不可重入函数?
如果当前进程没有调用该函数就可以


