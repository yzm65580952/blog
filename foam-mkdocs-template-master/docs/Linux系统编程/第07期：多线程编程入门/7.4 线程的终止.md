# 7.4 线程的终止
## 终止线程的三种方式
1. 从start_routine正常return
2. 显式调用 pthread_exit
函数原型： void pthread_exit(void *retval);
返回值通过参数retval传递
3. 线程被 pthread_cancel取消
## pthread_exit与exit的区别
线程调用pthread_exit，只会结束当前线程，不影响进程的运行
一个进程中的任何一个线程调用exit，将会结束整个进程
## demo
pthread_cancel.c
```c
#include <stdio.h>
#include <pthread.h>
#include <unistd.h>
#include <stdlib.h>

int sum = 0;

void *thread_start (void *arg)
{
    int i;
    int len = *(int*)arg;
    for (i = 0; i < len; i++)
    {
        sum += i;
        sleep (1);
        printf ("sub thread: sum = %d\n", sum);
    }
    printf ("sub thread: exit\n");
    //pthread_exit (NULL);	//显式调用退出线程
    exit (0);
}

int main (void)
{
    pthread_t tid;
    int arg = 10;
    pthread_create (&tid, NULL, thread_start, (void *) &arg);
    sleep (15);
    pthread_cancel (tid);	//在主线程关闭线程
    printf ("main thread: sum = %d\n", sum);
    printf ("main thread: exit\n");
    return 0;
}

```
