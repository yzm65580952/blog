# 7.6 线程属性
## 默认属性
1. 调度参数：
2. 线程栈地址：
3. 线程栈大小：8M
4. 栈末尾警戒缓冲区大小：PAGESIZE
5. 线程的分离状态：joinable、detached
6. 继承性：PTHREAD_INHERIT_SCHED、PTHREAD_EXPLICIT_SCHED
7. 作用域：PTHREAD_SCOPE_PROCESS、PTHREAD_SCOPE_SYSTEM
8. 1.调度策略：SCHED_FIFO、SCHED_RR、SCHED_OTHER

## 相关API函数
1. int pthread_attr_init (pthread_attr_t *attr);
2. int pthread_attr_destroy (pthread_attr_t *attr);
3. int pthread_attr_setstacksize (pthread_attr_t *attr, size_t stacksize);
4. int pthread_attr_getstacksize (const pthread_attr_t *attr, size_t *stacksize);
5. int pthread_attr_setstackaddr (pthread_attr_t *attr, void *stackaddr);
6. int pthread_attr_getstackaddr (const pthread_attr_t *attr, void **stackaddr);
7. int pthread_attr_setdetachstate (pthread_attr_t *attr, int detachstate);
8. int pthread_attr_getdetachstate (const pthread_attr_t *attr, int *detachstate);

## demo
```c
#include <stdio.h>
#include <pthread.h>
#include <unistd.h>
#include <stdlib.h>

int sum = 0;

void * thread_start (void *arg)
{
    int len = *(int*)arg;
    for (int i = 0; i < len; i++)
    {
        sum += i;
        printf ("sub thead: sum = %d\n", sum);
    }
    printf ("sub thread: exit\n");
    pthread_exit (NULL);
}

int main (void)
{
    int status;
    pthread_t tid;
    int arg = 10;

    pthread_attr_t attr;	//1.创建线程属性变量
    status = pthread_attr_init (&attr);	//2.初始化变量
    if (status != 0)
    {
        perror ("pthread_attr_init");
        exit (EXIT_FAILURE);
    }

    // set/get thread stack size
    int stacksize = 0;
    pthread_attr_getstacksize (&attr, &stacksize);	//3.获取线程栈的大小
    printf ("stacksize = %d kb\n", stacksize/1024);
    stacksize = 2 * 1024 * 1024;
    pthread_attr_setstacksize (&attr, stacksize);	//4.设置线程栈的大小
    stacksize = 0;
    pthread_attr_getstacksize (&attr, &stacksize);
    printf ("stacksize = %d kb\n", stacksize/1024);

    //get/set thread detach state
    int detachstate;
    pthread_attr_getdetachstate (&attr, &detachstate);//5.获取线程分离状态
    printf ("thread detach state: %d\n", detachstate);
	
    pthread_attr_setdetachstate (&attr, PTHREAD_CREATE_DETACHED);//6.设置线程分离状态
    //pthread_attr_setdetachstate (&attr, PTHREAD_CREATE_JOINABLE);
    pthread_attr_getdetachstate (&attr, &detachstate);
    printf ("thread detach state: %d\n", detachstate);
    

    pthread_create (&tid, &attr, thread_start, (void *) &arg);//7.使用attr创建线程
    pthread_attr_destroy (&attr);//8.销毁属性变量attr

    //pthread_join (tid, NULL);
    printf ("main thread: sum = %d\n", sum);
    printf ("main thread: exit\n");
    pthread_exit (NULL);
    return 0;
}

```