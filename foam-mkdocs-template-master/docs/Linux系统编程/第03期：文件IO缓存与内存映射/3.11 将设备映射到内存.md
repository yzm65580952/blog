# 3.11 将设备映射到内存
## LCD显示原理
1. 显存
2. lcd控制器
3. lcd驱动器
4. lcd屏幕
## Frambuffer设备
 对不同LCD硬件设备的抽象
对不同的显存进行抽象
屏蔽底层各种硬件差异、操作细节
采用统一接口进行操作：显示位置、换页机制
## 将设备映射到内存

```c

/************************************************
*      Filename: fb.c
*        Author: litao.wang
*    Bug Report: 3284757626@qq.com
*   Description: 
*        Create: 2018-12-09 09:14:38
* Last Modified: 2018-12-10 00:34:40
*************************************************/
#include <stdio.h>
#include <string.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <sys/mman.h>
#include <unistd.h>

int main (void)
{
	int fd;
	unsigned char *fb_mem;
	int i = 100;
	fd = open ("/dev/fb0", O_RDWR);	//打开Frambuffer设备
	if (fd == -1)
	{
		perror ("open");
		return -1;
	}
	fb_mem = mmap (NULL, 800*600, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);
	//映射Frambuffer设备
	if (fb_mem == MAP_FAILED)
	{
		perror ("mmap");
		return -1;
	}
	while (1)
	{
		memset (fb_mem, i++, 800*600);	//颜色变化
		sleep (1);
	}

	close (fd);
	return 0;
}

```
