# 4.19 孤儿进程
## 什么是孤儿进程？
1. 每一个进程都是从父进程fork出来的
2. 一般情况下父进程会通过wait/waitid系统调用等待子进程退出，获取到子进程状态，释放相关资源后才会退出
3. 若父进程退出时，子进程还没退出，会将进程托管给init进程，则子进程就变成了孤儿进程

```c

/************************************************
*      Filename: oprphan.c
*        Author: litao.wang
*    Bug Report: 3284757626@qq.com
*   Description: 
*        Create: 2019-03-15 17:00:42
* Last Modified: 2019-03-15 18:03:01
*************************************************/
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <unistd.h>

int main (void)
{
	pid_t pid;
	pid = fork ();
	if (pid < 0)
	{
		perror ("fork");
		exit (1);
	}
	if (pid == 0)
	{
		printf ("child process run pid:%d ppid:%d\n", getpid (), getppid ());
		printf ("child process sleep 5 seconds\n");
		sleep (5);
		printf ("child process wake pid:%d ppid:%d\n", getpid (), getppid ());
		printf ("child process exit\n");
		exit (0);
	}
	else
	{
		printf ("father process run pid:%d ppid:%d\n", getpid (), getppid ());
		printf ("father process sleep 1 seconds\n");
		sleep (1);	//等待子进程创建
		printf ("father process exited.\n");
	}
	return 0;
}
```

## 孤儿进程的托管
在图形模式下，孤儿进程的托管进程为upstart，pid不为1
在文本模式虚拟终端下，孤儿进程的托管进程init的pid为1
## init服务进程的演变
Sysvinit
Upstart
Systemd
